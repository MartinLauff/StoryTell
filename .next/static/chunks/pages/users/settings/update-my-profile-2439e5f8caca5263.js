(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[124],{4330:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/settings/update-my-profile",function(){return t(7404)}])},7404:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return v}});var r=t(7568),o=t(655),s=t(5893),a=t(7294),i=t(9669),l=t.n(i),_=t(1664),p=t.n(_),u=t(1163),c=t.n(u),m=t(6699),d=t.n(m),h=t(1147),x=t.n(h),f=t(520),g=t.n(f),v=!0;n.default=function(e){var n=e.data,t=(0,a.useState)(null),i=t[0],_=t[1],u=(0,a.useState)(n.photo),m=u[0],h=u[1],f=(0,a.useState)(n.username),v=f[0],j=f[1],C=(0,a.useState)(n.hobby),y=C[0],b=C[1],w=(0,a.useState)(n.email),B=w[0],E=w[1],N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.photo;l()({url:"http://localhost:8000/api/users/update-my-profile",method:"put",data:{photo:e,username:v,hobby:y,email:B},withCredentials:!0}).then((function(){return c().push("/users/my-profile")})).catch((function(e){var n=e.response.data;return _((0,s.jsxs)("div",{className:d().errorBanner,children:[(0,s.jsx)("h4",{children:"Ooops...."}),(0,s.jsx)("ul",{style:{listStyle:"none"},children:n.message.split(",").map((function(e){return(0,s.jsx)("li",{children:e.replace("Validation failed:","").split(":")[1]},e)}))})]}))}))},k=function(e){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){h(n.result)}},L=function(){var e=(0,r.Z)((function(e){var t,r;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return e.preventDefault(),v&&y&&B?((t=new FormData).append("file",m),t.append("upload_preset","storytell"),m===n.photo?[3,2]:[4,l()({method:"post",url:"https://api.cloudinary.com/v1_1/ekoeko/image/upload",data:t,headers:{"Content-Type":"multipart/form-data"}})]):[2];case 1:return r=o.sent(),N(r.data.url),[3,3];case 2:N(),o.label=3;case 3:return[2]}}))}));return function(n){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:x().bar,children:[(0,s.jsx)(p(),{href:"/users/my-profile",children:(0,s.jsx)("a",{style:{height:"2rem"},children:(0,s.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M10 10L19 19M1 19L10 10L1 19ZM19 1L9.99828 10L19 1ZM9.99828 10L1 1L9.99828 10Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),(0,s.jsx)("h2",{children:"Edit profile"})]}),(0,s.jsxs)("form",{onSubmit:L,className:x().wrap,children:[(0,s.jsxs)("div",{className:x().imgWrap,children:[(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("img",{className:x().img,src:m,alt:"profile picture"}),m!==n.photo&&(0,s.jsx)("div",{onClick:function(){h(n.photo)},className:x().close,children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#ff2f2f",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,s.jsx)("input",{onChange:function(e){k(e.target.files[0]),h(e.target.files[0])},id:"image",accept:"image/*",type:"file",name:"image",value:""}),(0,s.jsx)("label",{htmlFor:"image",children:"Choose an image"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Username"}),(0,s.jsx)("input",{value:v,onChange:function(e){return j(e.target.value)},className:g().textInput,type:"text",minLength:"4",maxLength:"14"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Your hobby"}),(0,s.jsx)("input",{value:y,onChange:function(e){return b(e.target.value)},className:g().textInput,type:"text",minLength:"2",maxLength:"18"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"Email"}),(0,s.jsx)("input",{value:B,onChange:function(e){return E(e.target.value)},className:g().textInput,type:"email"})]})]}),(0,s.jsx)("button",{type:"submit",className:g().applyBtn,children:"Save"})]}),i]})}},520:function(e){e.exports={button:"Components_button__BY9YS",whiteButton:"Components_whiteButton__ZIUDv",redButton:"Components_redButton__5XsJr",textInput:"Components_textInput__xi2s6",btnWrapper:"Components_btnWrapper__pVph0",cancelBtn:"Components_cancelBtn__D5X_g",applyBtn:"Components_applyBtn__QcY2Q",moreBanner:"Components_moreBanner__Qeo6x",bannerOption:"Components_bannerOption__QuB5k",bannerText:"Components_bannerText__KsWGP",transparentLayer:"Components_transparentLayer__8SrQE",err:"Components_err__TWstW",xIcon:"Components_xIcon__N98h2",imgON:"Components_imgON__f_deP",imgOFF:"Components_imgOFF__c7y04",layer:"Components_layer__eFSk2",deleteBanner:"Components_deleteBanner__vq_hj",cancel:"Components_cancel__9pr49",delete:"Components_delete__0_IGi",editWrap:"Components_editWrap__fm7H1",textArea:"Components_textArea__xsDtq",Xmarker:"Components_Xmarker__joTSX",Not:"Components_Not__0sfJh",marginBottom:"Components_marginBottom__o8J3b"}},1147:function(e){e.exports={bar:"EditProfile_bar__8eAHp",wrap:"EditProfile_wrap__quNyR",imgWrap:"EditProfile_imgWrap__2vCqL",img:"EditProfile_img__yTfpH",close:"EditProfile_close__AKrJt",successBar:"EditProfile_successBar__Uw9xr"}},6699:function(e){e.exports={errorBanner:"Error_errorBanner__EDEUS",errMessage:"Error_errMessage__EAG1J",hide:"Error_hide__LPa3Y",custom500:"Error_custom500__Q8T4b",h500:"Error_h500__KOR9p",errWrap:"Error_errWrap__8zg74"}},1163:function(e,n,t){e.exports=t(387)}},function(e){e.O(0,[664,217,774,888,179],(function(){return n=4330,e(e.s=n);var n}));var n=e.O();_N_E=n}]);