(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{3783:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[...postId]",function(){return t(9878)}])},9878:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return D},default:function(){return O}});var n=t(7568),c=t(797),a=t(655),o=t(5893),r=t(1664),i=t.n(r),l=t(1163),d=t.n(l),m=t(7294),u=t(6471),h=t(2122),_=t.n(h),p=t(520),x=t.n(p),j=t(1574),v=function(e){var s=e.comment,t=e.userId,n=(0,m.useState)(!0),c=n[0],a=n[1],r=(0,u.Z)({url:"http://localhost:8000/api/comments/".concat(s._id),method:"delete"}),l=r.doRequest,d=r.errors;return(0,o.jsxs)("div",{className:c?_().commentWrap:_().hide,children:[s.postedBy._id===t&&(0,o.jsx)("div",{onClick:function(e){e.preventDefault(),a(!1),l()},className:x().Xmarker,children:(0,o.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M10 10L19 19M1 19L10 10L1 19ZM19 1L9.99828 10L19 1ZM9.99828 10L1 1L9.99828 10Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,o.jsx)(i(),{href:"/users/[...oneUser]",as:"/users/".concat(s.postedBy._id),children:(0,o.jsx)("a",{children:(0,o.jsx)("img",{className:_().pic,src:s.postedBy.photo,alt:s.postedBy.username})})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(i(),{href:"/users/[...oneUser]",as:"/users/".concat(s.postedBy._id),children:(0,o.jsx)("a",{style:{textDecoration:"none"},children:(0,o.jsx)("span",{className:_().name,children:s.postedBy.username})})}),(0,o.jsx)("span",{className:_().time,children:(0,j.Z)(new Date(s.createdAt),new Date,{addSuffix:!0}).replace("about","").replace("less than","")})]}),(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:_().content,style:{color:"#000"},children:s.content})})]}),d]})},f=t(2710),N=t(9107),w=t(6859),S=t(5845),g=t(7760),C=t(8537),y=t(8328),k=function(e){var s=e.comments,t=e.userId;if(0===s.length)return(0,o.jsx)("div",{className:_().noComments,children:"Be the first one to comment this post!"});if(!s)return(0,o.jsxs)("div",{"data-center":"center",children:[(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"}),(0,o.jsx)("div",{className:"wave"})]});var n=s.map((function(e){return(0,o.jsx)(v,{userId:t,comment:e},e._id)}));return(0,o.jsx)("div",{className:_().commentList,children:n})},Z=t(5363),b=t(7899),L=t(8976),I=t.n(L),W=t(4433),B=t(1110),D=!0,O=function(e){var s=e.data.post,t=e.data,r=(0,m.useState)(!1),l=r[0],h=r[1],_=(0,m.useState)(!1),p=_[0],j=_[1],L=(0,m.useState)(!1),D=L[0],O=L[1],P=(0,m.useState)(!1),E=P[0],F=P[1],T=(0,m.useState)(s.content),A=T[0],M=T[1],R=(0,m.useState)(""),q=R[0],Q=R[1],X=(0,m.useState)([]),G=X[0],J=X[1],U=(0,m.useState)(s.comments.length),z=U[0],H=U[1],K=(0,u.Z)({url:"http://localhost:8000/api/comments/".concat(s._id),method:"post",body:{content:q}}),Y=K.doRequest,V=K.errors,$=(0,u.Z)({url:"http://localhost:8000/api/posts/".concat(s._id),method:"delete",onSuccess:function(){return d().push("/users/my-profile")}}),ee=$.doRequest,se=$.errors,te=(0,u.Z)({url:"http://localhost:8000/api/posts/".concat(s._id),method:"put",body:{content:A}}),ne=te.doRequest,ce=te.errors,ae=function(){var e=(0,n.Z)((function(e){var s;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),q.length<4||q.length>30?[2]:[4,Y()];case 1:return(s=t.sent())&&(Q(""),H((function(e){return e+1})),J((function(e){return[s].concat((0,c.Z)(e))}))),[2]}}))}));return function(s){return e.apply(this,arguments)}}(),oe=G.map((function(e){return(0,o.jsx)(v,{comment:e},e.createdAt)})),re=function(){var e=(0,n.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),[4,ne()];case 1:return t.sent()?h(!1):M(s.content),[2]}}))}));return function(s){return e.apply(this,arguments)}}();return(0,o.jsxs)("div",{children:[(0,o.jsx)(f.Z,{}),(0,o.jsx)(y.Z,{}),(0,o.jsx)(W.Z,{}),(0,o.jsxs)("div",{className:I().showWrap,children:[(0,o.jsxs)("div",{className:I().post,children:[(0,o.jsxs)("div",{className:I().postTop,children:[(0,o.jsx)(i(),{href:"/topics/[topicSlug]",as:"/topics/".concat(s.slug),children:(0,o.jsxs)("a",{children:[(0,o.jsx)("img",{alt:s.title,src:"/".concat(s.slug,".jpg")}),(0,o.jsx)("span",{className:I().topic,children:"s/".concat(s.topic)})]})}),(0,o.jsx)("span",{children:"posted by"}),(0,o.jsx)(i(),{href:"/users/[...oneUser]",as:"/users/".concat(s.postedBy._id),children:(0,o.jsxs)("a",{children:[(0,o.jsx)("span",{className:I().name,children:s.postedBy.username}),(0,o.jsx)("img",{className:I().userPic,src:s.postedBy.photo,alt:s.postedBy.username})]})})]}),(0,o.jsxs)("div",{className:I().postCore,children:[(0,o.jsx)("h1",{className:I().title,children:s.title}),!l&&A.split("\n").map((function(e,s){return(0,o.jsx)("p",{style:0===e.length?{height:"1rem"}:null,className:I().content,children:e},s)})),l&&(0,o.jsx)("textarea",{className:x().textArea,onChange:function(e){return M(e.target.value)},value:A})]}),!l&&s.coverImage&&(0,o.jsx)("img",{alt:"cover image",className:I().image,src:s.coverImage}),l&&(0,o.jsxs)("div",{className:x().editWrap,children:[(0,o.jsx)("button",{onClick:function(){M(s.content),h(!1)},className:x().cancel,children:"Cancel"}),(0,o.jsx)("button",{onClick:re,className:x().delete,children:"Save"})]}),!l&&(0,o.jsxs)("div",{className:I().actions,children:[(0,o.jsx)("div",{className:I().showLikes,children:(0,o.jsx)(N.Z,{userId:t.userId,likes:s.likes,postID:s._id})}),(0,o.jsxs)("div",{className:I().comments,children:[(0,o.jsx)(Z.Z,{}),(0,o.jsx)("span",{className:I().count,children:z}),(0,o.jsx)("span",{children:1===s.comments.length?"Comment":"Comments"})]}),(0,o.jsx)("div",{onClick:function(){return F(!0)},style:{padding:"1rem 0.6rem"},children:(0,o.jsx)(B.Z,{})}),(0,o.jsxs)("div",{onClick:function(){return F(!1)},style:E?null:{display:"none"},className:x().moreBanner,children:[(0,o.jsx)(w.Z,{postID:s._id}),(0,o.jsx)(S.Z,{}),t.userPosts.includes(s._id)&&(0,o.jsx)(C.Z,{activation:h}),t.userPosts.includes(s._id)&&(0,o.jsx)(g.Z,{activation:j})]})]}),(0,o.jsx)("div",{onClick:function(){return F(!1)},className:E?x().transparentLayer:null})]}),!l&&(0,o.jsxs)("form",{onSubmit:ae,className:I().createWrap,children:[(0,o.jsx)("input",{onClick:function(){return O(!0)},onChange:function(e){return Q(e.target.value)},value:q,className:I().createComm,minLength:"6",maxLength:"30",type:"text",placeholder:"Add new comment"}),(0,o.jsxs)("div",{style:D?null:{display:"none"},className:I().btns,children:[(0,o.jsx)("button",{className:I().cancel,onClick:function(){Q(""),O(!1)},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"".concat(I().send," ").concat(q.length>5?I().sendON:I().sendOFF),children:"Post"})]})]}),oe,!l&&(0,o.jsx)(k,{userId:t.userId,comments:s.comments})]}),V,se,ce,(0,o.jsx)(b.Z,{}),p&&(0,o.jsx)("div",{onClick:function(){return j(!1)},className:x().layer}),p&&(0,o.jsxs)("div",{className:x().deleteBanner,children:[(0,o.jsx)("p",{children:"Are you sure you want to delete this post?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{className:x().cancel,onClick:function(){return j(!1)},children:"Cancel"}),(0,o.jsx)("button",{onClick:function(e){e.preventDefault(),ee()},className:x().delete,children:"Delete"})]})]})]})}},2122:function(e){e.exports={noComments:"Comment_noComments__TLoV9",commentList:"Comment_commentList__hiQ8u",commentWrap:"Comment_commentWrap__4a85f",name:"Comment_name__aa3P2",time:"Comment_time___sIMm",content:"Comment_content__HGuMs",pic:"Comment_pic__7sGqg",hide:"Comment_hide__I_R8v"}},8976:function(e){e.exports={showWrap:"Show_showWrap__LnzcF",postTop:"Show_postTop__ca9_x",userPic:"Show_userPic__zktEi",createWrap:"Show_createWrap__8Ql7g",btns:"Show_btns__veOAc",cancel:"Show_cancel__F2S2J",send:"Show_send__wEaQR",sendON:"Show_sendON__WHLqo",sendOFF:"Show_sendOFF__3nnpx",createComm:"Show_createComm__xGa_y",showLikes:"Show_showLikes__ZK8yg",count:"Show_count__oTTWf",post:"Show_post__2SE9W",postCore:"Show_postCore__7AdQ8",topic:"Show_topic__kbiDW",name:"Show_name__Y6SaO",title:"Show_title___7J3Y",content:"Show_content__XEu3M",actions:"Show_actions__ZtI4j",comments:"Show_comments__h3Nub",image:"Show_image__dcRJK"}},1163:function(e,s,t){e.exports=t(387)}},function(e){e.O(0,[664,217,187,909,109,774,888,179],(function(){return s=3783,e(e.s=s);var s}));var s=e.O();_N_E=s}]);