(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{7744:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[...postId]",function(){return t(9274)}])},9274:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return M},default:function(){return O}});var s=t(5666),r=t.n(s),o=t(5893),a=t(1664),c=t(1163),i=t(7294),l=t(1955),u=t(6471),d=t(2122),m=t.n(d),h=t(520),p=t.n(h),_=t(1574),x=function(e){var n=e.comment,t=e.userId,s=(0,i.useState)(!0),r=s[0],c=s[1],d=(0,u.Z)({url:"/api/comments/".concat(n._id),method:"delete",headers:{Authorization:"Bearer "+l.Z.get("jwt")}}),h=d.doRequest,x=d.errors;return(0,o.jsxs)("div",{className:r?m().commentWrap:m().hide,children:[n.postedBy._id===t&&(0,o.jsx)("div",{onClick:function(e){e.preventDefault(),c(!1),h()},className:p().Xmarker,children:(0,o.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M10 10L19 19M1 19L10 10L1 19ZM19 1L9.99828 10L19 1ZM9.99828 10L1 1L9.99828 10Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,o.jsx)(a.default,{href:"/users/[...oneUser]",as:"/users/".concat(n.postedBy._id),children:(0,o.jsx)("a",{children:(0,o.jsx)("img",{className:m().pic,src:n.postedBy.photo,alt:n.postedBy.username})})}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(a.default,{href:"/users/[...oneUser]",as:"/users/".concat(n.postedBy._id),children:(0,o.jsx)("a",{style:{textDecoration:"none"},children:(0,o.jsx)("span",{className:m().name,children:n.postedBy.username})})}),(0,o.jsx)("span",{className:m().time,children:(0,_.Z)(new Date(n.createdAt),new Date,{addSuffix:!0}).replace("about","").replace("less than","")})]}),(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:m().content,style:{color:"#000"},children:n.content})})]}),x]})},j=t(2710),f=t(9107),v=t(6859),w=t(5845),C=function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("svg",{width:"20",height:"20.75",viewBox:"0 0 74 91",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M52.6458 9.19V8.19V7.29105C52.6498 7.2983 52.6458 7.29545 52.6458 7.28H52.6383C52.6374 7.27884 52.6364 7.27762 52.6353 7.27634C52.6153 7.25274 52.5425 7.19 52.4167 7.19H51.6458H50.6458H22.3542H21.5833C21.4575 7.19 21.3847 7.25274 21.3647 7.27634C21.3636 7.27762 21.3626 7.27884 21.3617 7.28H21.3542C21.3542 7.29009 21.3525 7.2948 21.3524 7.29484C21.3524 7.29486 21.3528 7.29356 21.3542 7.29105V8.19V15.38H16.4167V7.28C16.4167 3.65489 18.8835 1 21.5833 1H52.4167C55.1165 1 57.5833 3.65489 57.5833 7.28V15.38H52.6458V9.19ZM22.3542 17.38H23.3542H50.6458H51.6458H58.5833H59.5833H70.9167C71.9207 17.38 73 18.3969 73 20.02V23.57H67.4094H66.4486L66.4102 24.53L64.0302 84.0213L64.0302 84.0217C63.8913 87.5278 61.4904 90 58.8724 90H15.1276C12.5193 90 10.1087 87.5166 9.96978 84.0215L9.96977 84.0213L7.58983 24.53L7.55142 23.57H6.59062H1V20.02C1 18.3969 2.07931 17.38 3.08333 17.38H14.4167H15.4167H22.3542ZM1.00178 23.6748C1.00177 23.6748 1.00168 23.6746 1.00154 23.6742L1.00178 23.6748ZM58.1305 83.81H59.0912L59.1297 82.85L61.4614 24.61L61.5031 23.57H60.4622H13.5378H12.4969L12.5386 24.61L14.8703 82.85L14.9088 83.81H15.8695H58.1305Z",fill:"black",stroke:"black",strokeWidth:"3"})})})},g=function(e){var n=e.activation;return(0,o.jsxs)("div",{onClick:function(){return n(!0)},className:p().bannerOption,children:[(0,o.jsx)(C,{}),(0,o.jsx)("span",{className:p().bannerText,children:"Delete post"})]})},N=function(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M15.156 0L17.9999 2.8439L15.8319 5.01285L12.988 2.16895L15.156 0ZM4.73975 13.2602H7.58365L14.4915 6.35233L11.6476 3.50843L4.73975 10.4163V13.2602Z",fill:"black"}),(0,o.jsx)("path",{d:"M15.1675 16.1041H4.88961C4.86497 16.1041 4.83937 16.1135 4.81473 16.1135C4.78344 16.1135 4.75216 16.105 4.71993 16.1041H1.89593V2.83252H8.38667L10.2826 0.936584H1.89593C0.850326 0.936584 0 1.78596 0 2.83252V16.1041C0 17.1506 0.850326 18 1.89593 18H15.1675C15.6703 18 16.1525 17.8002 16.5081 17.4447C16.8637 17.0891 17.0634 16.6069 17.0634 16.1041V7.88708L15.1675 9.78301V16.1041Z",fill:"black"})]})})},L=function(e){var n=e.activation;return(0,o.jsxs)("div",{onClick:function(){return n(!0)},className:p().bannerOption,children:[(0,o.jsx)(N,{}),(0,o.jsx)("span",{className:p().bannerText,children:"Edit post"})]})},S=t(8328),k=function(e){var n=e.comments,t=e.userId;if(!n||0===n.length)return(0,o.jsx)("div",{className:m().noComments,children:"Be the first one to comment this post!"});var s=n.map((function(e){return(0,o.jsx)(x,{userId:t,comment:e},e._id)}));return(0,o.jsx)("div",{className:m().commentList,children:s})},y=t(5363),H=t(7899),b=t(8976),Z=t.n(b),B=t(4433),A=t(1110);function I(e,n,t,s,r,o,a){try{var c=e[o](a),i=c.value}catch(l){return void t(l)}c.done?n(i):Promise.resolve(i).then(s,r)}function W(e){return function(){var n=this,t=arguments;return new Promise((function(s,r){var o=e.apply(n,t);function a(e){I(o,s,r,a,c,"next",e)}function c(e){I(o,s,r,a,c,"throw",e)}a(void 0)}))}}function V(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var M=!0,O=function(e){var n=e.data.post,t=e.data,s=(0,i.useState)(!1),d=s[0],m=s[1],h=(0,i.useState)(!1),_=h[0],C=h[1],N=(0,i.useState)(!1),b=N[0],I=N[1],M=(0,i.useState)(!1),O=M[0],D=M[1],P=(0,i.useState)(n.content),E=P[0],T=P[1],F=(0,i.useState)(""),R=F[0],q=F[1],z=(0,i.useState)([]),Q=z[0],X=z[1],G=(0,i.useState)(n.comments.length),J=G[0],U=G[1],K=(0,u.Z)({url:"/api/comments/".concat(n._id),method:"post",headers:{Authorization:"Bearer "+l.Z.get("jwt")},body:{content:R}}),Y=K.doRequest,$=K.errors,ee=(0,u.Z)({url:"/api/posts/".concat(n._id),method:"delete",headers:{Authorization:"Bearer "+l.Z.get("jwt")},onSuccess:function(){return c.default.push("/users/my-profile")}}),ne=ee.doRequest,te=ee.errors,se=(0,u.Z)({url:"/api/posts/".concat(n._id),method:"put",body:{content:E},headers:{Authorization:"Bearer "+l.Z.get("jwt")}}),re=se.doRequest,oe=se.errors,ae=W(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(R.length<4||R.length>30)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Y();case 5:(t=e.sent)&&(q(""),U((function(e){return e+1})),X((function(e){return[t].concat(V(e))})));case 7:case"end":return e.stop()}}),e)}))),ce=Q.map((function(e){return(0,o.jsx)(x,{comment:e},e.createdAt)})),ie=W(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,re();case 3:e.sent?m(!1):T(n.content);case 5:case"end":return e.stop()}}),e)})));return(0,o.jsxs)("div",{children:[(0,o.jsx)(j.Z,{}),(0,o.jsx)(S.Z,{}),(0,o.jsx)(B.Z,{}),(0,o.jsxs)("div",{className:Z().showWrap,children:[(0,o.jsxs)("div",{className:Z().post,children:[(0,o.jsxs)("div",{className:Z().postTop,children:[(0,o.jsx)(a.default,{href:"/topics/[topicSlug]",as:"/topics/".concat(n.slug),children:(0,o.jsxs)("a",{children:[(0,o.jsx)("img",{alt:n.title,src:"/".concat(n.slug,".jpg")}),(0,o.jsx)("span",{className:Z().topic,children:"s/".concat(n.topic)})]})}),(0,o.jsx)("span",{children:"posted by"}),(0,o.jsx)(a.default,{href:"/users/[...oneUser]",as:"/users/".concat(n.postedBy._id),children:(0,o.jsxs)("a",{children:[(0,o.jsx)("span",{className:Z().name,children:n.postedBy.username}),(0,o.jsx)("img",{className:Z().userPic,src:n.postedBy.photo,alt:n.postedBy.username})]})})]}),(0,o.jsxs)("div",{className:Z().postCore,children:[(0,o.jsx)("h1",{className:Z().title,children:n.title}),!d&&E.split("\n").map((function(e,n){return(0,o.jsx)("p",{style:0===e.length?{height:"1rem"}:null,className:Z().content,children:e},n)})),d&&(0,o.jsx)("textarea",{className:p().textArea,onChange:function(e){return T(e.target.value)},value:E})]}),!d&&n.coverImage&&(0,o.jsx)("img",{alt:"cover image",className:Z().image,src:n.coverImage}),d&&(0,o.jsxs)("div",{className:p().editWrap,children:[(0,o.jsx)("button",{onClick:function(){T(n.content),m(!1)},className:p().cancel,children:"Cancel"}),(0,o.jsx)("button",{onClick:ie,className:p().delete,children:"Save"})]}),!d&&(0,o.jsxs)("div",{className:Z().actions,children:[(0,o.jsx)("div",{className:Z().showLikes,children:(0,o.jsx)(f.Z,{userId:t.userId,likes:n.likes,postID:n._id})}),(0,o.jsxs)("div",{className:Z().comments,children:[(0,o.jsx)(y.Z,{}),(0,o.jsx)("span",{className:Z().count,children:J}),(0,o.jsx)("span",{children:1===n.comments.length?"Comment":"Comments"})]}),(0,o.jsx)("div",{onClick:function(){return D(!0)},style:{padding:"1rem 0.6rem"},children:(0,o.jsx)(A.Z,{})}),(0,o.jsxs)("div",{onClick:function(){return D(!1)},style:O?null:{display:"none"},className:p().moreBanner,children:[(0,o.jsx)(v.Z,{postID:n._id}),(0,o.jsx)(w.Z,{}),t.userPosts.includes(n._id)&&(0,o.jsx)(L,{activation:m}),t.userPosts.includes(n._id)&&(0,o.jsx)(g,{activation:C})]})]}),(0,o.jsx)("div",{onClick:function(){return D(!1)},className:O?p().transparentLayer:null})]}),!d&&(0,o.jsxs)("form",{onSubmit:ae,className:Z().createWrap,children:[(0,o.jsx)("input",{onClick:function(){return I(!0)},onChange:function(e){return q(e.target.value)},value:R,className:Z().createComm,minLength:"6",maxLength:"30",type:"text",placeholder:"Add new comment"}),(0,o.jsxs)("div",{style:b?null:{display:"none"},className:Z().btns,children:[(0,o.jsx)("button",{className:Z().cancel,onClick:function(){q(""),I(!1)},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"".concat(Z().send," ").concat(R.length>5?Z().sendON:Z().sendOFF),children:"Post"})]})]}),ce,!d&&(0,o.jsx)(k,{userId:t.userId,comments:n.comments})]}),$,te,oe,(0,o.jsx)(H.Z,{}),_&&(0,o.jsx)("div",{onClick:function(){return C(!1)},className:p().layer}),_&&(0,o.jsxs)("div",{className:p().deleteBanner,children:[(0,o.jsx)("p",{children:"Are you sure you want to delete this post?"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{className:p().cancel,onClick:function(){return C(!1)},children:"Cancel"}),(0,o.jsx)("button",{onClick:function(e){e.preventDefault(),ne()},className:p().delete,children:"Delete"})]})]})]})}},2122:function(e){e.exports={noComments:"Comment_noComments__TLoV9",commentList:"Comment_commentList__hiQ8u",commentWrap:"Comment_commentWrap__4a85f",name:"Comment_name__aa3P2",time:"Comment_time___sIMm",content:"Comment_content__HGuMs",pic:"Comment_pic__7sGqg",hide:"Comment_hide__I_R8v"}},8976:function(e){e.exports={showWrap:"Show_showWrap__LnzcF",postTop:"Show_postTop__ca9_x",userPic:"Show_userPic__zktEi",createWrap:"Show_createWrap__8Ql7g",btns:"Show_btns__veOAc",cancel:"Show_cancel__F2S2J",send:"Show_send__wEaQR",sendON:"Show_sendON__WHLqo",sendOFF:"Show_sendOFF__3nnpx",createComm:"Show_createComm__xGa_y",showLikes:"Show_showLikes__ZK8yg",count:"Show_count__oTTWf",post:"Show_post__2SE9W",postCore:"Show_postCore__7AdQ8",topic:"Show_topic__kbiDW",name:"Show_name__Y6SaO",title:"Show_title___7J3Y",content:"Show_content__XEu3M",actions:"Show_actions__ZtI4j",comments:"Show_comments__h3Nub",image:"Show_image__dcRJK"}},1163:function(e,n,t){e.exports=t(387)}},function(e){e.O(0,[842,618,180,109,774,888,179],(function(){return n=7744,e(e.s=n);var n}));var n=e.O();_N_E=n}]);