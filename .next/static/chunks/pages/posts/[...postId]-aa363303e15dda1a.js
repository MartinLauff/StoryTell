(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{7744:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[...postId]",function(){return n(9878)}])},9878:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return O},default:function(){return P}});var s=n(5666),o=n.n(s),r=n(5893),c=n(1664),a=n(1163),i=n(7294),l=n(1955),u=n(6471),d=n(2122),m=n.n(d),h=n(520),_=n.n(h),p=n(1574),x=function(e){var t=e.comment,n=e.userId,s=(0,i.useState)(!0),o=s[0],a=s[1],d=(0,u.Z)({url:"/api/comments/".concat(t._id),method:"delete",headers:{Authorization:"Bearer "+l.Z.get("jwt")}}),h=d.doRequest,x=d.errors;return(0,r.jsxs)("div",{className:o?m().commentWrap:m().hide,children:[t.postedBy._id===n&&(0,r.jsx)("div",{onClick:function(e){e.preventDefault(),a(!1),h()},className:_().Xmarker,children:(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M10 10L19 19M1 19L10 10L1 19ZM19 1L9.99828 10L19 1ZM9.99828 10L1 1L9.99828 10Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)(c.default,{href:"/users/[...oneUser]",as:"/users/".concat(t.postedBy._id),children:(0,r.jsx)("a",{children:(0,r.jsx)("img",{className:m().pic,src:t.postedBy.photo,alt:t.postedBy.username})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.default,{href:"/users/[...oneUser]",as:"/users/".concat(t.postedBy._id),children:(0,r.jsx)("a",{style:{textDecoration:"none"},children:(0,r.jsx)("span",{className:m().name,children:t.postedBy.username})})}),(0,r.jsx)("span",{className:m().time,children:(0,p.Z)(new Date(t.createdAt),new Date,{addSuffix:!0}).replace("about","").replace("less than","")})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:m().content,style:{color:"#000"},children:t.content})})]}),x]})},j=n(2710),f=n(9107),v=n(6859),w=n(5845),N=n(7760),g=n(8537),S=n(8328),y=function(e){var t=e.comments,n=e.userId;if(!t||0===t.length)return(0,r.jsx)("div",{className:m().noComments,children:"Be the first one to comment this post!"});var s=t.map((function(e){return(0,r.jsx)(x,{userId:n,comment:e},e._id)}));return(0,r.jsx)("div",{className:m().commentList,children:s})},C=n(5363),k=n(7899),b=n(8976),Z=n.n(b),L=n(4433),B=n(1110);function A(e,t,n,s,o,r,c){try{var a=e[r](c),i=a.value}catch(l){return void n(l)}a.done?t(i):Promise.resolve(i).then(s,o)}function I(e){return function(){var t=this,n=arguments;return new Promise((function(s,o){var r=e.apply(t,n);function c(e){A(r,s,o,c,a,"next",e)}function a(e){A(r,s,o,c,a,"throw",e)}c(void 0)}))}}function W(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var O=!0,P=function(e){var t=e.data.post,n=e.data,s=(0,i.useState)(!1),d=s[0],m=s[1],h=(0,i.useState)(!1),p=h[0],b=h[1],A=(0,i.useState)(!1),O=A[0],P=A[1],D=(0,i.useState)(!1),E=D[0],T=D[1],F=(0,i.useState)(t.content),M=F[0],R=F[1],q=(0,i.useState)(""),z=q[0],Q=q[1],X=(0,i.useState)([]),G=X[0],J=X[1],U=(0,i.useState)(t.comments.length),H=U[0],K=U[1],Y=(0,u.Z)({url:"/api/comments/".concat(t._id),method:"post",headers:{Authorization:"Bearer "+l.Z.get("jwt")},body:{content:z}}),V=Y.doRequest,$=Y.errors,ee=(0,u.Z)({url:"/api/posts/".concat(t._id),method:"delete",headers:{Authorization:"Bearer "+l.Z.get("jwt")},onSuccess:function(){return a.default.push("/users/my-profile")}}),te=ee.doRequest,ne=ee.errors,se=(0,u.Z)({url:"/api/posts/".concat(t._id),method:"put",body:{content:M},headers:{Authorization:"Bearer "+l.Z.get("jwt")}}),oe=se.doRequest,re=se.errors,ce=I(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(z.length<4||z.length>30)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,V();case 5:(n=e.sent)&&(Q(""),K((function(e){return e+1})),J((function(e){return[n].concat(W(e))})));case 7:case"end":return e.stop()}}),e)}))),ae=G.map((function(e){return(0,r.jsx)(x,{comment:e},e.createdAt)})),ie=I(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,oe();case 3:e.sent?m(!1):R(t.content);case 5:case"end":return e.stop()}}),e)})));return(0,r.jsxs)("div",{children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(S.Z,{}),(0,r.jsx)(L.Z,{}),(0,r.jsxs)("div",{className:Z().showWrap,children:[(0,r.jsxs)("div",{className:Z().post,children:[(0,r.jsxs)("div",{className:Z().postTop,children:[(0,r.jsx)(c.default,{href:"/topics/[topicSlug]",as:"/topics/".concat(t.slug),children:(0,r.jsxs)("a",{children:[(0,r.jsx)("img",{alt:t.title,src:"/".concat(t.slug,".jpg")}),(0,r.jsx)("span",{className:Z().topic,children:"s/".concat(t.topic)})]})}),(0,r.jsx)("span",{children:"posted by"}),(0,r.jsx)(c.default,{href:"/users/[...oneUser]",as:"/users/".concat(t.postedBy._id),children:(0,r.jsxs)("a",{children:[(0,r.jsx)("span",{className:Z().name,children:t.postedBy.username}),(0,r.jsx)("img",{className:Z().userPic,src:t.postedBy.photo,alt:t.postedBy.username})]})})]}),(0,r.jsxs)("div",{className:Z().postCore,children:[(0,r.jsx)("h1",{className:Z().title,children:t.title}),!d&&M.split("\n").map((function(e,t){return(0,r.jsx)("p",{style:0===e.length?{height:"1rem"}:null,className:Z().content,children:e},t)})),d&&(0,r.jsx)("textarea",{className:_().textArea,onChange:function(e){return R(e.target.value)},value:M})]}),!d&&t.coverImage&&(0,r.jsx)("img",{alt:"cover image",className:Z().image,src:t.coverImage}),d&&(0,r.jsxs)("div",{className:_().editWrap,children:[(0,r.jsx)("button",{onClick:function(){R(t.content),m(!1)},className:_().cancel,children:"Cancel"}),(0,r.jsx)("button",{onClick:ie,className:_().delete,children:"Save"})]}),!d&&(0,r.jsxs)("div",{className:Z().actions,children:[(0,r.jsx)("div",{className:Z().showLikes,children:(0,r.jsx)(f.Z,{userId:n.userId,likes:t.likes,postID:t._id})}),(0,r.jsxs)("div",{className:Z().comments,children:[(0,r.jsx)(C.Z,{}),(0,r.jsx)("span",{className:Z().count,children:H}),(0,r.jsx)("span",{children:1===t.comments.length?"Comment":"Comments"})]}),(0,r.jsx)("div",{onClick:function(){return T(!0)},style:{padding:"1rem 0.6rem"},children:(0,r.jsx)(B.Z,{})}),(0,r.jsxs)("div",{onClick:function(){return T(!1)},style:E?null:{display:"none"},className:_().moreBanner,children:[(0,r.jsx)(v.Z,{postID:t._id}),(0,r.jsx)(w.Z,{}),n.userPosts.includes(t._id)&&(0,r.jsx)(g.Z,{activation:m}),n.userPosts.includes(t._id)&&(0,r.jsx)(N.Z,{activation:b})]})]}),(0,r.jsx)("div",{onClick:function(){return T(!1)},className:E?_().transparentLayer:null})]}),!d&&(0,r.jsxs)("form",{onSubmit:ce,className:Z().createWrap,children:[(0,r.jsx)("input",{onClick:function(){return P(!0)},onChange:function(e){return Q(e.target.value)},value:z,className:Z().createComm,minLength:"6",maxLength:"30",type:"text",placeholder:"Add new comment"}),(0,r.jsxs)("div",{style:O?null:{display:"none"},className:Z().btns,children:[(0,r.jsx)("button",{className:Z().cancel,onClick:function(){Q(""),P(!1)},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"".concat(Z().send," ").concat(z.length>5?Z().sendON:Z().sendOFF),children:"Post"})]})]}),ae,!d&&(0,r.jsx)(y,{userId:n.userId,comments:t.comments})]}),$,ne,re,(0,r.jsx)(k.Z,{}),p&&(0,r.jsx)("div",{onClick:function(){return b(!1)},className:_().layer}),p&&(0,r.jsxs)("div",{className:_().deleteBanner,children:[(0,r.jsx)("p",{children:"Are you sure you want to delete this post?"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:_().cancel,onClick:function(){return b(!1)},children:"Cancel"}),(0,r.jsx)("button",{onClick:function(e){e.preventDefault(),te()},className:_().delete,children:"Delete"})]})]})]})}},2122:function(e){e.exports={noComments:"Comment_noComments__TLoV9",commentList:"Comment_commentList__hiQ8u",commentWrap:"Comment_commentWrap__4a85f",name:"Comment_name__aa3P2",time:"Comment_time___sIMm",content:"Comment_content__HGuMs",pic:"Comment_pic__7sGqg",hide:"Comment_hide__I_R8v"}},8976:function(e){e.exports={showWrap:"Show_showWrap__LnzcF",postTop:"Show_postTop__ca9_x",userPic:"Show_userPic__zktEi",createWrap:"Show_createWrap__8Ql7g",btns:"Show_btns__veOAc",cancel:"Show_cancel__F2S2J",send:"Show_send__wEaQR",sendON:"Show_sendON__WHLqo",sendOFF:"Show_sendOFF__3nnpx",createComm:"Show_createComm__xGa_y",showLikes:"Show_showLikes__ZK8yg",count:"Show_count__oTTWf",post:"Show_post__2SE9W",postCore:"Show_postCore__7AdQ8",topic:"Show_topic__kbiDW",name:"Show_name__Y6SaO",title:"Show_title___7J3Y",content:"Show_content__XEu3M",actions:"Show_actions__ZtI4j",comments:"Show_comments__h3Nub",image:"Show_image__dcRJK"}},1163:function(e,t,n){e.exports=n(387)}},function(e){e.O(0,[842,618,909,109,774,888,179],(function(){return t=7744,e(e.s=t);var t}));var t=e.O();_N_E=t}]);