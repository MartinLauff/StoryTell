(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[539],{7744:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/[...postId]",function(){return s(9878)}])},9878:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSP:function(){return O},default:function(){return P}});var n=s(5666),a=s.n(n),r=s(5893),o=s(1664),c=s(1163),i=s(7294),l=s(1955),d=s(6471),u=s(2122),m=s.n(u),h=s(520),_=s.n(h),p=s(1574),x=function(e){var t=e.comment,s=e.userId,n=(0,i.useState)(!0),a=n[0],c=n[1],u=(0,d.Z)({url:"/api/comments/".concat(t._id),method:"delete",headers:{Authorization:"Bearer "+l.Z.get("jwt")}}),h=u.doRequest,x=u.errors;return(0,r.jsxs)("div",{className:a?m().commentWrap:m().hide,children:[t.postedBy._id===s&&(0,r.jsx)("div",{onClick:function(e){e.preventDefault(),c(!1),h()},className:_().Xmarker,children:(0,r.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M10 10L19 19M1 19L10 10L1 19ZM19 1L9.99828 10L19 1ZM9.99828 10L1 1L9.99828 10Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,r.jsx)(o.default,{href:"/users/[...oneUser]",as:"/users/".concat(t.postedBy._id),children:(0,r.jsx)("a",{children:(0,r.jsx)("img",{className:m().pic,src:t.postedBy.photo,alt:t.postedBy.username})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.default,{href:"/users/[...oneUser]",as:"/users/".concat(t.postedBy._id),children:(0,r.jsx)("a",{style:{textDecoration:"none"},children:(0,r.jsx)("span",{className:m().name,children:t.postedBy.username})})}),(0,r.jsx)("span",{className:m().time,children:(0,p.Z)(new Date(t.createdAt),new Date,{addSuffix:!0}).replace("about","").replace("less than","")})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:m().content,style:{color:"#000"},children:t.content})})]}),x]})},j=s(2710),v=s(9107),f=s(6859),w=s(5845),N=s(7760),g=s(8537),S=s(8328),y=function(e){var t=e.comments,s=e.userId;if(0===t.length)return(0,r.jsx)("div",{className:m().noComments,children:"Be the first one to comment this post!"});if(!t)return(0,r.jsxs)("div",{"data-center":"center",children:[(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"}),(0,r.jsx)("div",{className:"wave"})]});var n=t.map((function(e){return(0,r.jsx)(x,{userId:s,comment:e},e._id)}));return(0,r.jsx)("div",{className:m().commentList,children:n})},C=s(5363),k=s(7899),b=s(8976),Z=s.n(b),L=s(4433),B=s(1110);function A(e,t,s,n,a,r,o){try{var c=e[r](o),i=c.value}catch(l){return void s(l)}c.done?t(i):Promise.resolve(i).then(n,a)}function I(e){return function(){var t=this,s=arguments;return new Promise((function(n,a){var r=e.apply(t,s);function o(e){A(r,n,a,o,c,"next",e)}function c(e){A(r,n,a,o,c,"throw",e)}o(void 0)}))}}function W(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var O=!0,P=function(e){var t=e.data.post,s=e.data,n=(0,i.useState)(!1),u=n[0],m=n[1],h=(0,i.useState)(!1),p=h[0],b=h[1],A=(0,i.useState)(!1),O=A[0],P=A[1],D=(0,i.useState)(!1),E=D[0],T=D[1],F=(0,i.useState)(t.content),M=F[0],R=F[1],q=(0,i.useState)(""),z=q[0],Q=q[1],X=(0,i.useState)([]),G=X[0],J=X[1],U=(0,i.useState)(t.comments.length),H=U[0],K=U[1],Y=(0,d.Z)({url:"/api/comments/".concat(t._id),method:"post",headers:{Authorization:"Bearer "+l.Z.get("jwt")},body:{content:z}}),V=Y.doRequest,$=Y.errors,ee=(0,d.Z)({url:"/api/posts/".concat(t._id),method:"delete",headers:{Authorization:"Bearer "+l.Z.get("jwt")},onSuccess:function(){return c.default.push("/users/my-profile")}}),te=ee.doRequest,se=ee.errors,ne=(0,d.Z)({url:"/api/posts/".concat(t._id),method:"put",body:{content:M},headers:{Authorization:"Bearer "+l.Z.get("jwt")}}),ae=ne.doRequest,re=ne.errors,oe=I(a().mark((function e(t){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(z.length<4||z.length>30)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,V();case 5:(s=e.sent)&&(Q(""),K((function(e){return e+1})),J((function(e){return[s].concat(W(e))})));case 7:case"end":return e.stop()}}),e)}))),ce=G.map((function(e){return(0,r.jsx)(x,{comment:e},e.createdAt)})),ie=I(a().mark((function e(s){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.next=3,ae();case 3:e.sent?m(!1):R(t.content);case 5:case"end":return e.stop()}}),e)})));return(0,r.jsxs)("div",{children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(S.Z,{}),(0,r.jsx)(L.Z,{}),(0,r.jsxs)("div",{className:Z().showWrap,children:[(0,r.jsxs)("div",{className:Z().post,children:[(0,r.jsxs)("div",{className:Z().postTop,children:[(0,r.jsx)(o.default,{href:"/topics/[topicSlug]",as:"/topics/".concat(t.slug),children:(0,r.jsxs)("a",{children:[(0,r.jsx)("img",{alt:t.title,src:"/".concat(t.slug,".jpg")}),(0,r.jsx)("span",{className:Z().topic,children:"s/".concat(t.topic)})]})}),(0,r.jsx)("span",{children:"posted by"}),(0,r.jsx)(o.default,{href:"/users/[...oneUser]",as:"/users/".concat(t.postedBy._id),children:(0,r.jsxs)("a",{children:[(0,r.jsx)("span",{className:Z().name,children:t.postedBy.username}),(0,r.jsx)("img",{className:Z().userPic,src:t.postedBy.photo,alt:t.postedBy.username})]})})]}),(0,r.jsxs)("div",{className:Z().postCore,children:[(0,r.jsx)("h1",{className:Z().title,children:t.title}),!u&&M.split("\n").map((function(e,t){return(0,r.jsx)("p",{style:0===e.length?{height:"1rem"}:null,className:Z().content,children:e},t)})),u&&(0,r.jsx)("textarea",{className:_().textArea,onChange:function(e){return R(e.target.value)},value:M})]}),!u&&(0,r.jsx)("img",{className:Z().image,src:t.coverImage}),u&&(0,r.jsxs)("div",{className:_().editWrap,children:[(0,r.jsx)("button",{onClick:function(){R(t.content),m(!1)},className:_().cancel,children:"Cancel"}),(0,r.jsx)("button",{onClick:ie,className:_().delete,children:"Save"})]}),!u&&(0,r.jsxs)("div",{className:Z().actions,children:[(0,r.jsx)("div",{className:Z().showLikes,children:(0,r.jsx)(v.Z,{userId:s.userId,likes:t.likes,postID:t._id})}),(0,r.jsxs)("div",{className:Z().comments,children:[(0,r.jsx)(C.Z,{}),(0,r.jsx)("span",{className:Z().count,children:H}),(0,r.jsx)("span",{children:1===t.comments.length?"Comment":"Comments"})]}),(0,r.jsx)("div",{onClick:function(){return T(!0)},style:{padding:"1rem 0.6rem"},children:(0,r.jsx)(B.Z,{})}),(0,r.jsxs)("div",{onClick:function(){return T(!1)},style:E?null:{display:"none"},className:_().moreBanner,children:[(0,r.jsx)(f.Z,{postID:t._id}),(0,r.jsx)(w.Z,{}),s.userPosts.includes(t._id)&&(0,r.jsx)(g.Z,{activation:m}),s.userPosts.includes(t._id)&&(0,r.jsx)(N.Z,{activation:b})]})]}),(0,r.jsx)("div",{onClick:function(){return T(!1)},className:E?_().transparentLayer:null})]}),!u&&(0,r.jsxs)("form",{onSubmit:oe,className:Z().createWrap,children:[(0,r.jsx)("input",{onClick:function(){return P(!0)},onChange:function(e){return Q(e.target.value)},value:z,className:Z().createComm,minLength:"6",maxLength:"30",type:"text",placeholder:"Add new comment"}),(0,r.jsxs)("div",{style:O?null:{display:"none"},className:Z().btns,children:[(0,r.jsx)("button",{className:Z().cancel,onClick:function(){Q(""),P(!1)},children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"".concat(Z().send," ").concat(z.length>5?Z().sendON:Z().sendOFF),children:"Post"})]})]}),ce,!u&&(0,r.jsx)(y,{userId:s.userId,comments:t.comments})]}),$,se,re,(0,r.jsx)(k.Z,{}),p&&(0,r.jsx)("div",{onClick:function(){return b(!1)},className:_().layer}),p&&(0,r.jsxs)("div",{className:_().deleteBanner,children:[(0,r.jsx)("p",{children:"Are you sure you want to delete this post?"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:_().cancel,onClick:function(){return b(!1)},children:"Cancel"}),(0,r.jsx)("button",{onClick:function(e){e.preventDefault(),te()},className:_().delete,children:"Delete"})]})]})]})}},2122:function(e){e.exports={noComments:"Comment_noComments__TLoV9",commentList:"Comment_commentList__hiQ8u",commentWrap:"Comment_commentWrap__4a85f",name:"Comment_name__aa3P2",time:"Comment_time___sIMm",content:"Comment_content__HGuMs",pic:"Comment_pic__7sGqg",hide:"Comment_hide__I_R8v"}},8976:function(e){e.exports={showWrap:"Show_showWrap__LnzcF",postTop:"Show_postTop__ca9_x",userPic:"Show_userPic__zktEi",createWrap:"Show_createWrap__8Ql7g",btns:"Show_btns__veOAc",cancel:"Show_cancel__F2S2J",send:"Show_send__wEaQR",sendON:"Show_sendON__WHLqo",sendOFF:"Show_sendOFF__3nnpx",createComm:"Show_createComm__xGa_y",showLikes:"Show_showLikes__ZK8yg",count:"Show_count__oTTWf",post:"Show_post__2SE9W",postCore:"Show_postCore__7AdQ8",topic:"Show_topic__kbiDW",name:"Show_name__Y6SaO",title:"Show_title___7J3Y",content:"Show_content__XEu3M",actions:"Show_actions__ZtI4j",comments:"Show_comments__h3Nub",image:"Show_image__dcRJK"}},1163:function(e,t,s){e.exports=s(387)}},function(e){e.O(0,[842,618,909,109,774,888,179],(function(){return t=7744,e(e.s=t);var t}));var t=e.O();_N_E=t}]);